# UGC V1.2 风险词白名单 + 分月龄规则增强测试计划（2026-02-23）

## 1. 测试目标

验证 V1.2 在以下方面达到最小可用：

1. 黑名单 + 白名单生效，降低误杀
2. 分月龄风险策略正确（重点 <12m 蜂蜜）
3. block/warn 分级正确且文案可解释
4. API 正确返回 `risk_hits`
5. 前端能展示 warn 与 block 差异

## 2. 执行清单

- backend build：`cd backend && npm run build`
- frontend type-check：`cd frontend && npm run type-check`
- smoke：`bash scripts/test/smoke.sh`

## 3. 专项用例（>=6）

1. `<12m + 蜂蜜` 提审
- 预期：`block`，返回 `risk_hits` 包含 `honey-under-12m`

2. `12m+ + 蜂蜜` 提审
- 预期：不触发蜂蜜 block（其他规则仍正常）

3. 任意月龄 + `整颗坚果`
- 预期：`block`，强拦截

4. 任意月龄 + `高盐/高糖`
- 预期：`warn`，允许提交，前端可见提示

5. 白名单误杀回归：包含“蜂蜜色”
- 预期：不命中蜂蜜 block

6. 提审失败反馈可解释性
- 预期：错误中包含命中词、风险原因、建议替代

7. 兼容性回归（旧数据）
- 预期：不报错，`risk_hits` 可为空数组，列表/详情正常

## 4. 通过标准

- 构建、类型检查、smoke 全绿
- 专项用例至少 6 条通过，且包含误杀回归
- 无 P0/P1 阻塞问题
