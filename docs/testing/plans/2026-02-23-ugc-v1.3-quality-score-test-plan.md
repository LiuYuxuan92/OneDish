# UGC V1.3 质量评分与推荐入池 测试计划

日期：2026-02-23

## 1. 测试范围

- 后端：质量评分计算、入池标记、混排推荐、管理接口
- 前端：投稿/广场质量标签展示
- 构建：backend build、frontend type-check
- smoke：核心路径冒烟

## 2. 核心规则校验点

### 2.1 质量评分维度
1. 完整度：标题/成人食材/宝宝食材/月龄范围对分数有正向影响
2. 安全性：risk block 直接触发低分与剔除
3. 可执行性：prep_time/step_branches/difficulty/servings 生效
4. 反馈表现：report_count/adoption_rate 影响分数

### 2.2 入池阈值
5. `quality_score >= 75` 且已发布 -> `in_recommend_pool=true`
6. 低于阈值 -> `in_recommend_pool=false`

### 2.3 降权/剔除规则
7. 被举报（>=3）剔除
8. 低采纳率（<0.08）剔除；<0.15 降权
9. 风险命中 block 剔除

### 2.4 推荐混排
10. 开关开启时支持命中高质量UGC
11. 开关关闭时仅官方推荐

### 2.5 对标下厨房差异验证
12. 规则中“可执行+宝宝安全”权重高于一般互动指标（反馈表现仅15分）

## 3. 用例设计（专项 >= 6 条）

- TC01：完整投稿 + 无风险 + 较高采纳率 => 分数>=75，入池
- TC02：缺失月龄范围/宝宝食材 => 分数下降，待优化
- TC03：risk block => 直接剔除
- TC04：report_count=3 => 剔除
- TC05：adoption_rate=0.05 => 剔除
- TC06：adoption_rate=0.12 => 降权（分数降、一般不入池）
- TC07：管理员重算接口可批量生效
- TC08：广场页展示“推荐入池/待优化”标签

## 4. 执行命令

- Backend build: `cd backend && npm run build`
- Frontend type-check: `cd frontend && npm run type-check`
- Smoke: 手动调用关键 API + 前端页面切换验证

## 5. 通过标准

- 构建与类型检查通过
- smoke 路径无阻断
- 专项用例至少 6 条通过
- 结果记录到测试报告
