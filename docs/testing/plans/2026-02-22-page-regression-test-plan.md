# 页面回归测试计划（待执行）- 2026-02-22

## 1. 基本信息
- 计划名称：核心页面回归测试
- 计划日期：2026-02-22
- 执行人：待分配
- 关联范围：OneDish Web（首页、菜谱详情、周计划、购物清单）

## 2. 测试目标
1. 验证核心页面可正常访问、渲染和交互。
2. 验证关键业务链路在回归后无阻断问题。
3. 为后续发布提供页面级质量结论。

## 3. 测试范围
### 3.1 包含范围
- 首页：推荐内容展示、入口导航、刷新行为。
- 菜谱详情：详情信息展示、成人/宝宝版切换、关键操作按钮状态。
- 周计划：查看周维度计划、创建/修改计划的基本交互。
- 购物清单：列表展示、勾选状态变更、手动添加条目。

### 3.2 不包含范围
- 压力测试与性能基准。
- 真机多端兼容性深度验证。
- 非核心页面（如个人中心、收藏等）的完整回归。

## 4. 测试环境
- 前端地址：`http://localhost:8081`
- 后端地址：`http://localhost:3000`
- API 版本：`/api/v1`
- 账号：游客登录（`POST /api/v1/auth/guest`）

## 5. 前置条件
1. backend 与 frontend 均已启动且可访问。
2. 数据库迁移/种子数据已就绪（可获得可用菜谱）。
3. 测试前先执行一次 smoke：`bash scripts/test/smoke.sh`。

## 6. 用例清单（关键交互 + 通过标准）

| 用例ID | 页面 | 关键交互 | 通过标准 |
|---|---|---|---|
| PR-HOME-001 | 首页 | 打开首页并加载推荐卡片 | 首屏 5s 内完成渲染；无空白/报错；推荐列表可见 |
| PR-HOME-002 | 首页 | 下拉刷新或触发刷新按钮 | 数据刷新成功；不出现重复卡片或无限 loading |
| PR-DETAIL-001 | 菜谱详情 | 从首页进入任一菜谱详情 | 标题、食材、步骤等核心信息完整展示 |
| PR-DETAIL-002 | 菜谱详情 | 切换成人版/宝宝版内容 | 切换后内容正确更新；无报错或布局错乱 |
| PR-WEEK-001 | 周计划 | 进入周计划页查看一周数据 | 可看到周视图（7天）；空态/有数据态展示正确 |
| PR-WEEK-002 | 周计划 | 新增或编辑某日餐食计划 | 提交后列表即时更新；刷新后数据仍存在 |
| PR-SHOP-001 | 购物清单 | 进入购物清单页并加载历史清单 | 清单可见；空态提示文案正确 |
| PR-SHOP-002 | 购物清单 | 勾选/取消勾选任一条目 | 状态切换即时生效；刷新后状态保持一致 |
| PR-SHOP-003 | 购物清单 | 手动添加一条购物项 | 新条目展示在列表中；字段内容正确 |

## 7. 通过标准
- P0（阻断主流程）用例通过率必须 100%。
- 总体通过率不低于 95%。
- 无 P0/P1 未修复缺陷。

## 8. 风险与应对
| 风险 | 影响 | 应对措施 |
|---|---|---|
| 本地环境不稳定（服务未启动/端口冲突） | 影响执行效率与结果可信度 | 先执行 smoke，失败先修复环境后再回归 |
| 测试数据不足导致部分场景无法覆盖 | 用例阻塞或结论偏弱 | 补充 seed 数据或使用固定测试账号 |
| UI 细节变更频繁 | 误报增多 | 聚焦关键交互与通过标准，视觉细节单列记录 |

## 9. 输出物
- 回归报告建议路径：`docs/testing/reports/YYYY-MM-DD-page-regression-test-report.md`
- 证据：关键步骤截图、控制台日志、失败请求响应
