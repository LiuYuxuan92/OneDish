# UGC V1.2 风险词白名单 + 分月龄规则增强测试报告（2026-02-23）

## 1. 构建与基础检查

- backend build：✅ `cd backend && npm run build`
- frontend type-check：✅ `cd frontend && npm run type-check`
- smoke：✅ `bash scripts/test/smoke.sh`（7/7 通过）

## 2. 专项验证（7 条）

执行命令：
- `cd backend && npx tsx -e "...UgcRiskService 用例脚本..."`

### Case 1：`<12m + 蜂蜜`
- 结果：✅
- 实际：`block`，命中 `honey-under-12m`

### Case 2：`12m+ + 蜂蜜`
- 结果：✅
- 实际：不触发蜂蜜 block

### Case 3：`整颗坚果`
- 结果：✅
- 实际：`block`，命中 `whole-nut-choking`

### Case 4：`高盐`
- 结果：✅
- 实际：`warn`，允许提交（`safeForSubmit=true`）

### Case 5：误杀回归（白名单）`蜂蜜色`
- 结果：✅
- 实际：不命中蜂蜜规则

### Case 6：`酒精/料酒`
- 结果：✅
- 实际：`block`，命中 `alcohol`

### Case 7：无风险样例
- 结果：✅
- 实际：无命中

## 3. 结论

UGC V1.2 最小可用目标已达成：

- 黑白名单与分月龄策略已接入
- block/warn 分级可解释
- API 结构支持 `risk_hits`
- 前端可展示 warn/block 与替代建议
- 兼容老接口主流程（未破坏原有字段）
