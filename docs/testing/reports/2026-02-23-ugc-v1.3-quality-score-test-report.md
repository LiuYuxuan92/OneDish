# UGC V1.3 质量评分与推荐入池 测试报告

日期：2026-02-23

## 1. 构建与检查

- Backend build: ✅ `cd backend && npm run build`
- Frontend type-check: ✅ `cd frontend && npm run type-check`
- DB migration: ✅ `cd backend && npm run migrate`

## 2. Smoke

- `GET /health`：✅
- `GET /api/v1/recipes/daily`：✅ 返回推荐内容
- `GET /api/v1/user-recipes/published`：✅ 返回UGC列表，含 `quality_score/in_recommend_pool`
- `npx tsx -e "new UserRecipeService().recomputeQualityScores()"`：✅ 可执行重算

## 3. 专项验证（>=6）

执行脚本：`backend/scripts/ugc-quality-smoke.ts`

1) TC01 高完整+低风险+高采纳率 => score=99，入池=true ✅  
2) TC02 低完整度 => score=53，入池=false ✅  
3) TC03 风险关键词命中（block场景）=> 入池=false ✅  
4) TC04 report_count=3 => 入池=false ✅  
5) TC05 adoption_rate=0.05 => 入池=false ✅  
6) TC06 adoption_rate=0.12（低采纳）=> 入池=false ✅

## 4. 结论

- 质量评分、阈值入池、降权/剔除规则均已按最小可用实现
- 推荐混排与管理接口已落地
- 前端质量标签展示可用

## 5. 已知限制

- 管理接口需 admin token 才能在线验证（本次以服务调用完成重算能力验证）
- 反馈指标字段当前为静态字段，后续建议接入真实行为采集与定时任务
