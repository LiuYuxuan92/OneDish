# UGC V1.1 安全与审核增强测试报告（2026-02-23）

## 1. 构建与基础检查

- backend build：✅ `cd backend && npm run build`
- frontend type-check：✅ `cd frontend && npm run type-check`
- smoke：✅ `bash scripts/test/smoke.sh`（7/7 通过）

## 2. 专项验证（>=5）

### Case 1：普通用户调用 review 被拒绝
- 结果：✅
- 实际：`403`，消息：`仅管理员可审核`

### Case 2：命中高风险词（蜂蜜）提交审核被拦截
- 结果：✅
- 实际：`400`，消息：`内容安全校验未通过：1岁以下婴幼儿禁用蜂蜜`

### Case 3：结构化字段写入与读取
- 结果：✅
- 实际：`baby_age_range=8-12个月`，`allergens` 长度=1，`is_one_pot=true`

### Case 4：管理员可执行审核通过
- 结果：✅
- 实际：`200`，审核后 `status=published`

### Case 5：旧数据兼容（无新字段）
- 结果：✅
- 实际：读取时 `allergens`/`step_branches` 自动为数组，`baby_age_range` 为 null

## 3. 结论

UGC V1.1 最小可用目标达成：

- 权限隔离生效
- 高风险内容可拦截并给出原因
- 结构化字段可录入与读取
- 旧数据兼容未破坏
- 前端可见性控制符合预期

未发现阻塞上线的 P0/P1 问题。