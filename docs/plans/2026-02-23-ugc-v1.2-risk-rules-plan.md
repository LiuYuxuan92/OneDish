# UGC V1.2 风险词白名单 + 分月龄规则增强计划（2026-02-23）

## 1. 目标

在 V1.1 的“安全拦截”基础上，升级为更可解释、可扩展、低误杀的规则体系：

1. 支持黑名单 + 白名单（减少误杀）
2. 支持分月龄风险策略（block/warn）
3. API 返回 `risk_hits` 结构化命中项
4. 前端区分 warn（可提交）与 block（不可提交）
5. 对标差异：我们以“宝宝安全优先”，不是纯内容平台

---

## 2. 规则设计

## 2.1 黑/白名单策略

- 黑名单：定义风险关键词与规则（如蜂蜜、整颗坚果、酒精）
- 白名单：定义例外词，避免误杀（如“蜂蜜色”）
- 判定顺序：
  1) 命中黑名单词
  2) 若同时命中白名单例外，则忽略该命中
  3) 输出风险级别和建议替代

## 2.2 分月龄风险策略

- `<12m` + 蜂蜜：`block`
- 任意月龄 + 整颗/整粒坚果：`block`（强拦截）
- 任意月龄 + 酒精相关：`block`
- 任意月龄 + 高盐高糖描述：`warn`

说明：月龄字段使用 `baby_age_range`，支持 `8-12个月`、`<12m` 等基础格式。

## 2.3 风险级别与返回文案规范

- `block`：阻断提交/发布，返回明确原因与替代建议
- `warn`：允许提交，但在投稿页与提审反馈展示提醒

返回字段规范：

- `risk_hits: Array<{ key, level, keyword, reason, suggestion? }>`
- 失败时附带 `validation_errors`（可读文案）

文案规范：

- 先说风险结论，再给替代方案
- 示例：`<12m 禁止蜂蜜，存在肉毒杆菌芽孢风险（建议：改为南瓜泥/香蕉泥等天然甜味食材）`

---

## 3. 产品定位差异（对标下厨房）

- 下厨房侧重内容分享与通用烹饪语义
- OneDish UGC V1.2 侧重宝宝安全：
  - 审核优先级以喂养安全为第一约束
  - 规则引擎允许“宁可提示，不可漏拦高风险”
  - 同时通过白名单降低误杀，避免“过度保守导致不可用”

---

## 4. 实施范围（最小可用）

后端：
- 新增可配置风险规则服务（黑/白名单 + 月龄 gate）
- 提审/审核链路接入规则引擎
- 返回结构增加 `risk_hits`
- 兼容旧接口字段

前端：
- 投稿页展示 `warn` 提示与 `block` 错误
- 提审反馈展示命中词与建议替代

---

## 5. 风险与回滚

风险：
- 规则过严导致误拦截
- 月龄解析失败导致判定偏差

缓解：
- 白名单机制
- 未识别月龄时仅执行非月龄依赖规则
- 保持兼容返回，不破坏旧客户端基础流程

回滚：
- 回退到 V1.1 纯黑名单逻辑（单点服务切换）
